邮件主题：回复: [案例号:CAS-11705-P8D4W1] %|P2|ICBC|工行用户反馈V2022-L版本系统运行三方应用报错问题% 案例重新分配 CMIT:0001459

====第1封邮件====

发件人：Li Qi
发送时间：2024-07-23 11:22:17.981000+00:00
邮件内容:
许先生，您好：
经群内与用户沟通答复，近期无法处理此问题，此case将暂时归档，如后续用户需要从系统层面再次分析可重启此案例，请您知悉：
Case No：: CAS-11705-P8D4W1
问题描述：
=================
用户反馈V2022-L版本系统运行三方应用报错问题，提供报错为“agent services 模块连通性使用命令管道失败”，需要协助分析处理。
问题分析：
=================
用户反馈三方应用使用重叠IO异步读取管道数据，读取线程阻塞等待event事件信号触发，当异步事件信号被触发，去读管道失败。
overlapped操作，指同一线程内部向多个目标传输（或从多个目标接收）数据引起的I/O重叠现象。ReadFile会将读文件请求放入读队列之后立即返回（false），而不会等到文件读完才返回(true)，一般会先调用waitformultipleobject或waitforsingleobject函数来等待某一个I\O请求绑定的事件对象的激活。等到激活事件对象后，再调用GetOverlappedResult函数取得重叠I\O的结果。
如果现在的问题是发生在读操作上的话，可以看下插件的代码是否在调用GetOverlappedResult函数之前设置了等待函数触发。从操作系统层面，我们没办法更改源代码来配合您的插件程序。只能是您那边来修改您的程序代码执行逻辑
用户表示由于管道文件是一种系统文件   会不会有安全策略会影响这种文件读写？神州网信操作系统本身没有特殊的安全策略机制，管道间的通信本质还是进程发起的，windows遵从的原则就是进程谁发起谁维护，不会干预。而且我听咱们用户说并不是所有电脑都有，所以还是要看是在什么逻辑下触发的阻塞。
案例总结：
=================
由于并未从用户方收取到任何日志，用户表示近期不方便处理，因此此案例暂做归档处理，如后续有相关问题，可再次重启本案例。
