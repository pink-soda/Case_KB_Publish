邮件主题：回复: [案例号: CAS-06661-R5X5C1 ] % 联想OEM用户-农业银行晋安支行用户反馈非分页缓冲池占用过高问题 % 初次响应 CMIT:0001498

====第1封邮件====

发件人：Li Qi
发送时间：2022-07-15 17:27:04.497000+00:00
邮件内容:
吴先生，您好：
       如刚才电话沟通，我谨以此封邮件阐述我们双方针对这个问题所涉及范围界定： 
问题定义: 
用户反馈V2020-L系统使用过于卡顿。
问题范围: 
我们将协助您分析处理上述问题，并对定义的问题给予最大的技术支持。 
如果能及时解决问题，或问题属于产品设计的行为，或问题涉及到三方，我们将考虑关闭案例。如果存在多个问题，则我们考虑拆分案例进行分析。 
接下来，我们将开始合作解决这个问题。如果您对以上的问题范围界定有任何异议，请尽快告知。如果您有其他任何疑问。也欢迎随时与我联系。
下一步动作：
      对于您的问题，我先说下我的理解，如有不对，请您指正：
1， 尝试过更换内存条，问题在更换初期得以缓解，因此并不排除硬件问题的可能
2， 卡顿问题的实际表现为nonpaged pool过高导致，但除内存外的其他资源使用情况并不固定，从提供截图来看，有DISK使用量100%的情况，也存在其他资源使用量高的情况。
3， 卡顿问题并不是瞬时的问题，而是会持续一段长时间的问题。
基于以上几点的问题理解，有如下一些建议：
1， 问题本质为系统hang，资源占用量高的问题。因此需要跟踪记录系统资源的使用情况以帮助问题排查
2， 虽表现为nonpaged pool过高，但不一定是由于内存资源的占用导致，因此需要多个工具来互相印证。
3， 并不排除硬件问题
关于建议2，目前涉及到的工具有：poolmon、perfmon、dump，具体收集方法如下：
Poolmon：
       下载并解压附件poolmon3Pass.zip至本地，当卡顿问题出现时，右键点击_LogPool-as-a-service.cmd，以管理员运行
       等到CMD出现如下信息的时候，再等待5-10分钟
之后右键点击_RemovePoolmon3service.cmd，以管理员运行，停止掉该服务。
此时会在当前文件夹生成Poolmon-OUTPUT，将这个文件夹压缩并上传给我们
Perfmon：
       下载附件“perfmon.txt”并更改为.bat。
以管理员身份运行后，当卡顿问题出现时，以管理员身份执行：Logman start Perf-1Minute
等待5-10分钟左右后，以管理员身份执行：Logman stop Perf-1Minute
将C:\PerfMonLogs\Perf-1Minute.blg保存并压缩文件上传。
Dump：
需提前配置：
*  下载附件“手动触发fulldump.txt”并将后缀更改为.bat
*  在手动触发fulldump.bat上点击右键，选择以管理员身份运行，注意保存个人数据，因为运行完成后，需要按任意键重启设备使配置生效。
*  按任意键重启（如需稍后重启，键入Ctrl+C）。
当卡顿问题出现时：
请按下键盘 左shift +右shift 按住不放，连按两次波浪号键“~”（Esc下方），触发蓝屏。
等待蓝屏信息收集完毕，设备自动重启进入系统后，收集Dump 文件C:\Window\Memory.DMP并压缩文件上传。
系统日志：
下载附件中的CMGELogCollector.zip，解压后运行CMGELogCollector.exe，勾选全部选项，点击“收集”，运行几分钟后会在桌面生成日志压缩包，将日志上传到CDUC。
收集完毕后将在当前用户桌面生成CMGE_Log。点击确定，将直接打开文件夹并指定为压缩文件。
您可以登陆https://cduc.cmgos.com <https://cduc.cmgos.com/> ，通过数据上传系统上传您所收集的日志信息 
用户名：nhjazhwu01
密码：nhjazhwu01

====第2封邮件====

发件人：Li Qi
发送时间：2022-07-19 15:04:09.434000+00:00
邮件内容:
吴先生，您好：
       如刚才电话沟通，由于暂不方便处理，经您的同意，此case将暂做归档处理，以下为案例总结，请您知悉：
Case No：CAS-06661-R5X5C1
问题描述：
=================
用户反馈V2020-L系统使用过于卡顿。
问题分析：
=================
此类性能问题，从操作系统层面可提前配置dump，如遇相同问题，可按之前邮件方法收集问题发生时的日志，并记录问题发生时间，以供后续分析。
问题总结：
=================
经用户同意，此case做归档处理。
以上为此问题的案例总结，如有任何问题，可随时与我们联系，谢谢。
