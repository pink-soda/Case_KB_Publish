邮件主题：回复: [案例号: CAS-10678-Y8G4V9 ] % |P2|ICBC|工行用户反馈V2020-L版本系统使用IE浏览器卡死问题 % 初次响应 CMIT:0001310

====第1封邮件====

发件人：Wei Liang
发送时间：2024-01-09 17:17:50.607000+00:00
邮件内容:
许先生 您好：
感谢您的电话接听。
根据您提供的信息，我谨在此阐述我们双方针对这个问题所涉及范围界定：
问题定义:
用户反馈在Win 7系统上，使用IE浏览器访问内部系统，点击某个网页上的日期，出现IE浏览器卡死的问题，需要协助排查。
问题范围:
我们将协助您分析处理上述问题，并对定义的问题给予最大的技术支持。
如果能及时解决问题，或问题属于产品设计的行为，或问题涉及到三方，我们将考虑关闭案例。如果存在多个问题，则我们考虑拆分案例进行分析。
接下来，我们将开始合作解决这个问题。如果您对以上的问题范围界定有任何异议，请尽快告知。如果您有其他任何疑问。也欢迎随时与我联系。
请您提供以下相关信息，用于问题排查。
1）此问题的复现操作视频。
2）使用IE浏览器只打开一个页面访问能出现问题的页面，复现IE浏览器卡死的问题，此时不强制关闭IE浏览器，打开“任务管理器”，找到IE浏览器进程 iexplore.exe，记录其进程PID（注意有多个IE进程的话，需要记录多个PID）。如下图所示PID为 4728、1040。
3）以管理员权限打开cmd命令行，切换到procdump.exe所在的目录，执行以下操作收取IE的dump，将抓取的dmp文件压缩上传。
procdump工具可以从以下链接下载：
https://cduc.cmgos.com/download.php?id=1221&token=bmRh437XYJw9EJQJWR8PhpyyE5Tk00J4
注意红色的PID更换成问题设备上对应的PID。
procdump.exe -ma 4728
procdump.exe -ma 1040
4）打包压缩系统日志文件夹C:\windows\system32\winevt\
如果这些日志无法排查问题，后续可能需要使用fiddler工具抓包网页访问操作，并保存对应的页面，提供给我们进一步排查。
fiddler抓包操作：
1）下载Fiddler日志分析工具，下载地址：https://telerik-fiddler.s3.amazonaws.com/fiddler/FiddlerSetup.exe 
2）待工具下载安装完毕后运行fiddler开始收集日志。
3）在问题设备上打开IE浏览器访问页面复现问题。
4）保存日志文件并上传至CDUC。

====第2封邮件====

发件人：Wei Liang
发送时间：2024-01-10 08:46:56.557000+00:00
邮件内容:
许先生 您好：
感谢您的电话接听。
根据您提供的信息，我谨在此阐述我们双方针对这个问题所涉及范围界定：
问题定义:
用户反馈在Win 7系统上，使用IE浏览器访问内部系统，点击某个网页上的日期，出现IE浏览器卡死的问题，需要协助排查。
问题范围:
我们将协助您分析处理上述问题，并对定义的问题给予最大的技术支持。
如果能及时解决问题，或问题属于产品设计的行为，或问题涉及到三方，我们将考虑关闭案例。如果存在多个问题，则我们考虑拆分案例进行分析。
接下来，我们将开始合作解决这个问题。如果您对以上的问题范围界定有任何异议，请尽快告知。如果您有其他任何疑问。也欢迎随时与我联系。
请您提供以下相关信息，用于问题排查。工具procdump和fiddler可以使用ICBC001账户登录CDUC系统，从“查看我的文件”页面下载。
1）此问题的复现操作视频。
2）使用IE浏览器只打开一个页面访问能出现问题的页面，复现IE浏览器卡死的问题，此时不强制关闭IE浏览器，打开“任务管理器”，找到IE浏览器进程 iexplore.exe，记录其进程PID（注意有多个IE进程的话，需要记录多个PID）。如下图所示PID为 4728、1040。
3）以管理员权限打开cmd命令行，切换到procdump.exe所在的目录，执行以下操作收取IE的dump，将抓取的dmp文件压缩上传。
注意红色的PID更换成问题设备上对应的PID。
procdump.exe -ma 4728
procdump.exe -ma 1040
4）打包压缩系统日志文件夹C:\windows\system32\winevt\
如果这些日志无法排查问题，后续可能需要使用fiddler工具抓包网页访问操作，并保存对应的页面，提供给我们进一步排查。
fiddler抓包操作：
1）下载并安装Fiddler日志分析工具。 
2）待工具下载安装完毕后运行fiddler开始收集日志。
3）在问题设备上打开IE浏览器访问页面复现问题。
4）保存日志文件并上传至CDUC。

====第3封邮件====

发件人：Wei Liang
发送时间：2024-01-12 14:06:08.614000+00:00
邮件内容:
许先生 您好：
感谢您的电话接听。
您可以按照上一封邮件的说明在Win 7 系统上复现IE浏览器卡死的现象，并抓取对应的日志，压缩后通过CDUC提供给我们排查问题。
如果有任何进展或疑问可以回复此邮件。

====第4封邮件====

发件人：Wei Liang
发送时间：2024-01-16 17:46:41.871000+00:00
邮件内容:
许先生 您好：
感谢您的电话接听。
查看您提供的IE浏览器出现卡死情况的dump，windbg显示问题为APPLICATION_HANG_BlockedOn_EventHandle_cfffffff。
查看locks情况，未显示locks的问题。
查看对应的4510线程的callstack，怀疑3、4帧的问题。
iertutil!Ordinal556是IE的内部函数，它的主要作用是在浏览器的内容进程中执行一些初始化和清理的操作。它可能与浏览器的安全性，兼容性，性能等方面有关。
当前日志无法排查具体的问题点，请您按照以下操作再次收集日志。
IE Dump：
1）使用ICBC001登录CDUC系统，从“查看我的文件”页面下载IEdump.zip文件。
2）关闭IE浏览器。
3）解压IEdump.zip到IEdump文件夹，以管理员权限运行IEdump.bat脚本，此时会出现一个cmd窗口，不要关闭它。
4）打开IE浏览器，访问内部系统，复现IE卡死问题。
5）在IEdump.bat脚本目录中会每隔10秒生成一个dump文件，最终得到3个dump文件。
6）结束IE浏览器，将抓取的3个dump文件压缩后通过CDUC上传。
fiddler抓包操作：
1）下载并安装Fiddler日志分析工具。 
2）待工具下载安装完毕后运行fiddler开始收集日志。
3）在问题设备上打开IE浏览器访问页面复现问题。
4）保存日志文件并上传至CDUC。

====第5封邮件====

发件人：Wei Liang
发送时间：2024-01-22 16:35:33.144000+00:00
邮件内容:
许先生 您好：
感谢您的电话接听。
请您将最终用户再次收集的IE dump文件压缩后，通过CDUC上传，提供给我们排查。
如果有任何进展或疑问可以回复此邮件。

====第6封邮件====

发件人：Wei Liang
发送时间：2024-01-24 17:53:51.816000+00:00
邮件内容:
许先生 您好：
查看您提供的在win7系统下，IE11浏览器访问内部某个应用的日期选择器出现IE卡死的dump日志，此时的thread线程callstack信息，除了ie_to_edge_bho和vglog组件，其他的都是系统自带的组件，并未发现可疑的地方。
而且IE浏览器与操作系统有紧密的联系，它会根据操作系统的安全设置来保护用户的隐私和数据，也会根据操作系统的版本来提供不同的功能和兼容性。
根据经验，如没有其他三方组件的影响，出现了IE浏览器无响应的问题，那么很有可能是网站代码造成：比如使用同步AJAX、大数据处理、循环次数或循环嵌套层数过多、递归调用死循环以及兼容性问题等，这类问题需要网站的开发人员来解决。
如果应用开发人员可以提供一个简单的、可以在外部网络环境下复现相同问题的demo应用，我们可以协助开发人员基于此demo进一步排查，但不确保一定能解决问题，谢谢。

====第7封邮件====

发件人：Wei Liang
发送时间：2024-01-25 10:46:04.704000+00:00
邮件内容:
许先生 您好：
感谢您的电话接听。
如果可以提供复现问题的demo应用，可以把demo文件压缩打包后，通过CDUC上传提供给我们。
日志上传方法：
您可以登陆https://cduc.cmgos.com <https://cduc.cmgos.com/> ，通过CDUC数据上传系统上传您所收集的日志信息。
用户名：icbcsupport
密码：icbcsupport
注意：添加文件，点击上传后，跳转到新的页面点击保存。

====第8封邮件====

发件人：Wei Liang
发送时间：2024-01-30 12:33:01.840000+00:00
邮件内容:
您好，
    感谢您发来的邮件。我现在不在公司，不方便查收邮件。我将于2024年2月18日（周日）回到办公室。 如果在此期间您需要帮助，请联系我的同事-贾伟（jiawei@cmgos.com）。
谢谢 

====第9封邮件====

发件人：CRM Case Email
发送时间：2024-01-30 12:33:02.455000+00:00
邮件内容:
许先生 您好：
很高兴与您电话沟通
*   目前看到报错信息”Unhandled promise rejection ReferenceError: “VisualViewport”未定义”，怀疑与代码兼容性有关，建议开放Web应用的供应商介入调查。
*   visualViewport API 是一个在 Web 开发中使用的 JavaScript API，它提供了有关用户当前视口（viewport）状态的信息。视口是用户在浏览器中看到的网页部分，而visualViewport API 允许开发者获取关于此视口的各种信息。
*   通过visualViewport API，开发者可以获取视口的尺寸、缩放级别和滚动位置等信息。这对于创建响应式设计和实现与用户界面相关的交互效果非常有用。
--------------

====第10封邮件====

发件人：Jia Wei
发送时间：2024-01-30 12:33:47.107000+00:00
邮件内容:
许先生 您好：
很高兴与您电话沟通
*   目前看到报错信息”Unhandled promise rejection ReferenceError: “VisualViewport”未定义”，怀疑与代码兼容性有关，建议开放Web应用的供应商介入调查。
*   visualViewport API 是一个在 Web 开发中使用的 JavaScript API，它提供了有关用户当前视口（viewport）状态的信息。视口是用户在浏览器中看到的网页部分，而visualViewport API 允许开发者获取关于此视口的各种信息。
*   通过visualViewport API，开发者可以获取视口的尺寸、缩放级别和滚动位置等信息。这对于创建响应式设计和实现与用户界面相关的交互效果非常有用。
--------------

====第11封邮件====

发件人：Jia Wei
发送时间：2024-02-05 10:49:08.178000+00:00
邮件内容:
许先生 您好：
在最新的Demo进行了测试，还是怀疑网页代码对于不同浏览器兼容性存在问题。
您需要引入专业网页开发人员进行问题排查
--------------

====第12封邮件====

发件人：Wei Liang
发送时间：2024-02-20 16:26:17.792000+00:00
邮件内容:
许先生 您好：
感谢您的电话接听。
如电话沟通中所说，当日期选择器组件出现问题时，只是当前的网页页面无法操作，但是IE浏览器本身并未失去响应，可以正常操作。这应该是日期选择器组件代码与IE浏览器存在兼容性问题，需要排查组件代码情况。
根据了解，此日期选择器组件是使用第三方的低代码平台实现的，在网络上查找资料了解到日期选择器组件是低代码平台提供的、内置的一个组件，建议与低代码平台开发厂商沟通此日期选择器组件在IE浏览器上的运行异常问题。

====第13封邮件====

发件人：Wei Liang
发送时间：2024-02-22 17:48:59.708000+00:00
邮件内容:
许先生 您好：
经过您的同意，我将暂时归档此案例。
工单的归档并不会影响我们为您提供技术支持服务，如有其他问题，您可以随时联系我们。
案例总结：
----
问题定义：
用户反馈在Win 7系统上，使用IE浏览器访问内部系统，点击某个网页上的日期，出现IE浏览器卡死的问题，需要协助排查。
问题总结：
日期选择器组件出现问题时，只是当前的网页页面无法操作，但是IE浏览器本身并未失去响应，可以正常操作。这应该是日期选择器组件代码与IE浏览器存在兼容性问题，需要排查组件代码情况。
日期选择器组件是低代码平台提供的、内置的一个组件，建议与低代码平台开发厂商沟通此日期选择器组件在IE浏览器上的运行异常问题。
以上，如您后续有任何问题，可随时与我们联系，谢谢。
