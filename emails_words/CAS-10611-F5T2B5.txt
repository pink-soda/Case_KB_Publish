邮件主题：回复: [案例号: CAS-10611-F5T2B5 ] % |P2|ICBC|V2020-L 1809版本系统连接WiFi蓝屏问题 % 初次响应 CMIT:0001147

====第1封邮件====

发件人：Wei Liang
发送时间：2023-12-29 10:05:27.418000+00:00
邮件内容:
许先生 您好：
感谢您的电话接听。
根据您提供的信息，我谨在此阐述我们双方针对这个问题所涉及范围界定：
问题定义:
工行用户反馈有一台V2020-L版本系统的设备连接WIFI后出现蓝屏，需要协助排查。
问题范围:
我们将协助您分析处理上述问题，并对定义的问题给予最大的技术支持。
如果能及时解决问题，或问题属于产品设计的行为，或问题涉及到三方，我们将考虑关闭案例。如果存在多个问题，则我们考虑拆分案例进行分析。
接下来，我们将开始合作解决这个问题。如果您对以上的问题范围界定有任何异议，请尽快告知。如果您有其他任何疑问。也欢迎随时与我联系。
请您将收集到的蓝屏dump文件压缩，通过CDUC或者sftp提供给我们进一步排查，谢谢。

====第2封邮件====

发件人：Wei Liang
发送时间：2023-12-29 16:19:25.119000+00:00
邮件内容:
许先生 您好：
针对此蓝屏dump分析结果如下：
1）根据 call stack 显示：nwifi!Dot11SendCompletion处理NBL时出现异常，对应的 NBL 为ffffd00838a3bda0。
2）这个 NBL 是 vwifimf.sys 申请的，在 FilterSendCompleted 时，并没有正常完成并释放 NBL ，反而传给了 nwifi 导致蓝屏。
下一步建议：
1）出现蓝屏问题的根本原因是 vwifimf.sys在 FilterSendCompleted 时，并没有正常完成并释放其申请的 NBL ，反而传给了 nwifi 导致蓝屏。请vwifimf厂商排查vwifimf未释放其申请的NBL原因。
2）如果每次连接WIFI必定出现蓝屏情况，是否可以安装旧版本的TMS应用，或者尝试更新无线网卡驱动后，是否能够改善出现蓝屏问题的概率。
详细分析：
查看您提供的蓝屏dump，报错代码为0xd1，这表示内核模式驱动程序在进程 IRQL 过高时尝试访问可分页内存。
查看对应的call stack信息，显示nwifi!Dot11SendCompletion处理NBL时出现异常，对应的NBL为ffffd00838a3bda0。
这个 NBL 是 vwifimf.sys 申请的，在 FilterSendCompleted 时，并没有正常完成并释放 NBL ，反而传给了 nwifi 导致错误蓝屏。
查看vwifimf.sys的版本为2023年11月，当前设备的无线网卡驱动为2021年5月的。

====第3封邮件====

发件人：Wei Liang
发送时间：2023-12-29 16:51:00.461000+00:00
邮件内容:
许先生 您好：
感谢您的电话接听。
经过您的同意，我将归档此案例。
工单的归档并不会影响我们为您提供技术支持服务，如有其他问题，您可以随时联系我们。
案例总结：
----
问题定义：
工行用户反馈有一台V2020-L版本系统的设备连接WIFI后出现蓝屏，需要协助排查。
问题总结：
出现蓝屏问题的根本原因是 vwifimf.sys在 FilterSendCompleted 时，并没有正常完成并释放其申请的 NBL ，反而传给了 nwifi 导致蓝屏。此问题需要vwifimf厂商排查vwifimf未释放其申请的NBL原因。
以上，如您后续有任何问题，可随时与我们联系，谢谢。
